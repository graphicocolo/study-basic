# JavaScript インスタンス

設計図（クラス）から作った、実際に使える実体。

## オブジェクトとインスタンス

雛形のオブジェクト → インスタンス（実体のオブジェクト）

|  インスタンス  |  雛形のオブジェクト  |
| ---- | ---- |
|  インスタンス プロパティ  |  静的 プロパティ  |
|  インスタンス メソッド  |  静的 メソッド  |

```js
// 説明のための仮のオブジェクト
const tarou = new Human(21, 'man');

tarou.age; // インスタンス プロパティ 個別の値
tarou.addAge(); // インスタンス メソッド 個別の処理

Human.maxAge; // 静的プロパティ 全体に関わる値
Human.genRandomHuman(); // 静的メソッド 全体に関わる処理
```

## クラスとインスタンスの関係

```
クラス（設計図）  →  new  →  インスタンス（実体）
たい焼きの型      →  焼く  →  たい焼き
```

型（クラス）は1つでも、中身を変えてたい焼き（インスタンス）を何個でも作れる。

## 基本の書き方

```js
// クラス（設計図）を定義
class User {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }

  greet() {
    console.log(`こんにちは、${this.name}です（${this.age}歳）`);
  }
}

// インスタンス（実体）を作る
const user1 = new User("田中太郎", 25);
const user2 = new User("佐藤花子", 30);

user1.greet();  // "こんにちは、田中太郎です（25歳）"
user2.greet();  // "こんにちは、佐藤花子です（30歳）"
```

- `class` → 設計図を定義する
- `constructor` → インスタンスが作られるときに自動で呼ばれる初期化処理
- `this` → 作られたインスタンス自身を指す
- `new` → インスタンスを作るキーワード

## オブジェクトとの違い

```js
// オブジェクト：1つだけ作るときに便利
const user = {
  name: "田中太郎",
  age: 25,
  greet() {
    console.log(`こんにちは、${this.name}です`);
  },
};

// クラス + インスタンス：同じ構造のものを複数作るときに便利
class User {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
}

const user1 = new User("田中太郎", 25);
const user2 = new User("佐藤花子", 30);
const user3 = new User("鈴木一郎", 28);
```

| | 使いどころ |
|---|---|
| **オブジェクト** | 1つだけのデータをまとめたいとき |
| **クラス + インスタンス** | 同じ構造のデータを複数作りたいとき |

## 実務での使われ方

### new Date() もインスタンス

```js
const now = new Date();  // Date クラスのインスタンス
console.log(now.getFullYear());  // 2026
console.log(now.getMonth() + 1); // 2（0始まりなので+1）
```

### new FormData() もインスタンス

```js
const form = document.querySelector("#my-form");
const data = new FormData(form);  // FormData クラスのインスタンス
console.log(data.get("name"));
```

### new Error() もインスタンス

```js
throw new Error("エラーが発生しました");
```

`new ○○()` と書いているものは、すべてクラスからインスタンスを作っている。

## まとめ

| 概念 | 一言で |
|---|---|
| **クラス** | 設計図（どんなデータと機能を持つかの定義） |
| **インスタンス** | 設計図から `new` で作った実体 |
| **constructor** | インスタンス生成時に自動で呼ばれる初期化処理 |
| **this** | そのインスタンス自身を指す |

普段使っている `new Date()` や `new FormData()` も、すべてクラスからインスタンスを作っている。

まとめ：

- クラス = 設計図（たい焼きの型）
- インスタンス = new で作った実体（焼き上がったたい焼き）
- 普段使っている new Date() や new FormData() も実はインスタンスを作っている
- オブジェクトは「1つだけ作るとき」、クラス+インスタンスは「同じ構造を複数作るとき」に使い分ける

## クラス・オブジェクト・インスタンスの関係

```
クラス（設計図）
  │
  │  new で生成
  ▼
インスタンス（実体） ＝ オブジェクト（データの入れ物）
```

インスタンスはオブジェクトの一種。

### オブジェクトには2種類ある

```js
// ① オブジェクトリテラル：直接作る（設計図なし）
const user = {
  name: "田中太郎",
  age: 25,
};

// ② インスタンス：クラス（設計図）から作る
class User {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
}
const user = new User("田中太郎", 25);
```

どちらも結果は「オブジェクト」だが、作り方が違う。

| 用語 | 役割 |
|---|---|
| **オブジェクト** | 名前付きの値をまとめた箱（大きなカテゴリ） |
| **クラス** | オブジェクトを量産するための設計図 |
| **インスタンス** | クラスから `new` で作ったオブジェクト |

```
オブジェクト（広い）
  ├── オブジェクトリテラル { name: "太郎" }  ← 直接作ったもの
  └── インスタンス new User("太郎")          ← クラスから作ったもの
```

インスタンスは必ずオブジェクトだが、オブジェクトが必ずインスタンスとは限らない。

## 標準組み込みオブジェクト

標準組み込みオブジェクトのメソッドを使っている例

```js
// Math（標準組み込みオブジェクト）の静的メソッド
Math.floor(price * 1.1);

// Number の静的メソッド
Number.parseInt("100", 10);
// グローバル関数の場合
const height = parseInt(heightInput.value, 10);

// String インスタンスのプロパティ
string.length;
// String インスタンスのメソッド
"hello".toUpperCase();

// Array インスタンスのメソッド
[1, 2, 3].map(x => x * 2);

// Date インスタンスのメソッド
new Date().getFullYear();
```

```text
処理に使う機能
  ├── グローバル関数（parseInt, parseFloat, isNaN など）
  └── 標準組み込みオブジェクトのメソッド
        ├── 静的メソッド（Math.floor, Number.parseInt など）
        └── インスタンスメソッド（.toUpperCase(), .map() など）
```

グローバル関数、静的メソッド、インスタンスメソッド、これらの違いについてコードを書く上で意識するポイント

「何に対して呼ぶか」だけ意識する

もしエラーが出たら「呼び方が違うんだな」と気づけるので、分類の名前を暗記する必要はありません。

今の段階では「こういう分類があるんだな」程度の理解で十分です。 コードを書いていく中で自然と身につきます。

```js
// ① そのまま呼ぶ（グローバル関数）
parseInt("100", 10);

// ② クラス名.で呼ぶ（静的メソッド）
Math.floor(3.7);

// ③ 値.で呼ぶ（インスタンスメソッド）
"hello".toUpperCase();
[1, 2, 3].map(x => x * 2);
```

|  種類  |  呼び方  |  覚え方  |
| ---- | ---- | ---- |
|  グローバル関数  |  parseInt()  |  そのまま書く  |
|  静的メソッド  |  Math.floor()   |  クラス名から呼ぶ  |
|  インスタンスメソッド  |  "hello".toUpperCase()  |  **値（変数）**から呼ぶ  |